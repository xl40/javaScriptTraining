<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <style>
        .cont{position: relative;}
        .box{float: left;padding: 6px;}
        .box p{width: 200px;background: #efefef;margin: 0;}
        .imgbox{border: solid 1px black;padding: 6px;border-radius: 6px;}
        .imgbox img{width: 200px;}
    </style>
</head>
<body>
    <div class="cont">
        <div class="box">
            <div class="imgbox">
                <img src="imgs/7.jpg" alt="">
            </div>
            <p>图片描述111图片描述111图片描述111图片描述111图片描述111图片描述111图片描述111图片描述111</p>
        </div>
        <div class="box">
            <div class="imgbox">
                <img src="imgs/3.jpg" alt="">
            </div>
            <p>图片描述111图片描述111图片描述111</p>
        </div>
        <div class="box">
            <div class="imgbox">
                <img src="imgs/2.jpg" alt="">
            </div>
            <p>图片描述111图片描述111图片描述111图片描述111图片描述111图片描述111图片描述111图片描述111图片描述111图片描述111图片描述111</p>
        </div>
        <div class="box">
            <div class="imgbox">
                <img src="imgs/1.jpg" alt="">
            </div>
            <p>图片描述111</p>
        </div>
        <div class="box">
            <div class="imgbox">
                <img src="imgs/4.jpg" alt="">
            </div>
            <p>图片描述111图片描述111图片描述111图片描述111</p>
        </div>
        <div class="box">
            <div class="imgbox">
                <img src="imgs/5.jpg" alt="">
            </div>
            <p>图片描述111</p>
        </div>
        <div class="box">
            <div class="imgbox">
                <img src="imgs/6.jpg" alt="">
            </div>
            <p>图片描述111</p>
        </div>
        <div class="box">
            <div class="imgbox">
                <img src="imgs/8.jpg" alt="">
            </div>
            <p>图片描述111</p>
        </div>
        <div class="box">
            <div class="imgbox">
                <img src="imgs/9.jpg" alt="">
            </div>
            <p>图片描述111</p>
        </div>
        <div class="box">
            <div class="imgbox">
                <img src="imgs/10.jpg" alt="">
            </div>
            <p>图片描述111</p>
        </div>
    </div>
</body>
<script>
    class WaterFall{
        constructor(){
            this.box = document.querySelectorAll(".box");
            this.clientW = document.documentElement.clientWidth;
            this.num = Math.floor(this.clientW / this.box[0].offsetWidth);
            this.firstLine()
            this.otherLine()
        }
        firstLine(){
            this.heightArr = [];
            for(let i=0;i<this.num;i++){
                this.heightArr.push(this.box[i].offsetHeight);
                this.box[i].style.float = "left";
                this.box[i].style.position = "";
            }
        }
        otherLine(){
            // console.log(this.heightArr);
            for(let i=this.num;i<this.box.length;i++){
                this.box[i].style.position = "absolute";
                this.box[i].style.float = "none";
                let min = Math.min(...this.heightArr);
                let minIndex = this.heightArr.indexOf(min);
                this.box[i].style.top = min + "px";
                this.box[i].style.left = minIndex * this.box[0].offsetWidth + "px";
                this.heightArr[minIndex] += this.box[i].offsetHeight;
            }
        }
    }

    onload = function(){
        new WaterFall();
    }
    onresize = function(){
        new WaterFall();
    }
</script>
</html>