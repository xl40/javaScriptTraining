<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="exporter-version" content="Evernote Mac 9.4.6 (461470)"/><meta name="author" content="704206198@qq.com"/><meta name="created" content="2017-10-24 01:47:29 +0000"/><meta name="source" content="desktop.mac"/><meta name="updated" content="2019-11-25 03:40:12 +0000"/><title>DAY26：本地存储和购物车</title></head><body><div><font face="Courier New" style="font-size: 18px;"><span style="font-size: 18px; font-family: &quot;Courier New&quot;; font-weight: bold;">本地存储</span></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font face="Courier New" style="font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1. cookie </font></div><div><font face="Courier New" style="font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;特点： 小(~4k),服务器环境(每次都会随着请求，发往服务器)，过期时间，完全兼容</font></div><div><font face="Courier New" style="font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;document.cookie=值</font></div><div><font face="Courier New" style="font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2. localStorage 、 sessionStorage</font></div><div><font face="Courier New" style="font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;特点： 大(~5M),不会发往服务器,没有过期时间</font></div><div><font face="Courier New" style="font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;共同点：</font></div><div><font face="Courier New" style="font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;不安全、不能跨域、不能跨浏览器,写入的都是字符</font></div></div><div><br/></div><div><font face="Courier New" style="font-size: 18px;"><span style="font-size: 18px; font-family: &quot;Courier New&quot;; font-weight: bold;">LocalStorage</span></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font face="Courier New" style="font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;window的属性&nbsp;&nbsp;&nbsp;&nbsp;返回 一个localStorage对象</font></div><div><br/></div><div><font face="Courier New" style="font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp; 对象的属性： </font></div><div><font face="Courier New" style="font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;localStorage.key=value &nbsp;&nbsp; 设置，修改</font></div><div><font face="Courier New" style="font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;localStorage.key;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;获取 </font></div><div><font face="Courier New" style="font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delete localStorage.key &nbsp;&nbsp;删除&nbsp;&nbsp;&nbsp;&nbsp;localStorage.key = undefined</font></div><div><font face="Courier New" style="font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for-in localStorage &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;枚举 批量删除 </font></div><div><font face="Courier New" style="font-size: 14px;"><br/></font></div><div><font face="Courier New" style="font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;方法：√</font></div><div><font face="Courier New" style="font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;localStorage.setItem(key,value) 设置、修改</font></div><div><font face="Courier New" style="font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;localStorage.getItem(key) &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 获取 </font></div><div><font face="Courier New" style="font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;localStorage.removeItem(key) &nbsp;&nbsp;&nbsp;&nbsp; 删除一个</font></div><div><font style="font-size: 14px; font-family: &quot;Courier New&quot;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;localStorage.clear() &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 删除所有 × </font></div><div><font face="Courier New" style="font-size: 14px;"><br/></font></div><div><font face="Courier New" style="font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;事件：</font></div><div><font face="Courier New" style="font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;window.onstorage 检测key 发生了变化，事件对象</font></div><div><font face="Courier New" style="font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ev.key 返回 变化的key</font></div><div><font face="Courier New" style="font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ev.newValue 变化后的值</font></div><div><font face="Courier New" style="font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ev.oldValue 变化前的值</font></div><div><font face="Courier New" style="font-size: 14px;"><br/></font></div><div><font face="Courier New" style="font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;案例：拖拽同步</font></div><div><font face="Courier New" style="font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font></div><div><font face="Courier New" style="font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;写到localStorage里面的都是字符</font></div><div><font face="Courier New" style="font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;json&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;->&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;str 序列化</font></div><div><font face="Courier New" style="font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;str&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;->&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;json 反序列化，实体化</font></div></div><div><br/></div><div><font style="font-size: 18px;"><span style="font-size: 18px; font-family: &quot;Courier New&quot;; font-weight: bold;">SessionStorage</span></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="color: rgb(51, 51, 51);"><font face="Courier New" style="font-size: 14px;">sessionStorage 生命周期 会话结束时</font></span></div><div><font face="Courier New" style="font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;属性：同上</font></div><div><font face="Courier New" style="font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;方法：同上</font></div></div><div><br/></div><div><br/></div><div><br/></div><div><span style="font-size: 14px;"><span style="font-size: 14px;"><span style="font-size: 14px; font-family: &quot;Courier New&quot;;">购物车：</span></span></span></div><div><span style="font-size: 14px;"><span style="font-size: 14px;"><span style="font-size: 14px; font-family: &quot;Courier New&quot;;">&nbsp;&nbsp;&nbsp;&nbsp; 注意： </span></span></span></div><div><span style="font-size: 14px;"><span style="font-size: 14px;"><span style="font-size: 14px; font-family: &quot;Courier New&quot;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1.本地存储需要先读取再设置 </span></span></span></div><div><span style="font-size: 14px;"><span style="font-size: 14px;"><span style="font-size: 14px; font-family: &quot;Courier New&quot;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2.本地存储只能存储字符串 </span></span></span></div><div><span style="font-size: 14px;"><span style="font-size: 14px;"><span style="font-size: 14px; font-family: &quot;Courier New&quot;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3.提前设计好要存入本地存储的数据 </span></span></span></div><div><br/></div><div><br/></div><div><span style="font-family: &quot;Courier New&quot;;">作业：</span></div><div><span style="font-family: &quot;Courier New&quot;;">使用cookie实现购物车</span></div><div><span style="font-family: &quot;Courier New&quot;;">使用</span><span style="font-size: 14px; font-family: &quot;Courier New&quot;;">localStorage实现购物车</span></div><div><br/></div><div><br/></div></body></html>